---
// ROI Calculator component
---

<section class="py-20 bg-gradient-to-br from-primary-50 to-primary-100">
  <div class="container mx-auto px-4">
    <div class="max-w-4xl mx-auto">
      <div class="text-center mb-12">
        <h2 class="font-display text-3xl md:text-4xl font-bold text-gray-900 mb-4">
          Calculate Your Bookkeeping ROI
        </h2>
        <p class="text-xl text-gray-600">
          See how much time and money you could save by outsourcing your bookkeeping
        </p>
      </div>

      <div class="bg-white rounded-2xl shadow-xl p-8 md:p-12">
        <div class="grid md:grid-cols-2 gap-8">
          <!-- Calculator Inputs -->
          <div class="space-y-6">
            <h3 class="text-2xl font-semibold text-gray-900 mb-6">Your Current Situation</h3>

            <!-- Hours per month -->
            <div>
              <label for="hours-per-month" class="block text-sm font-medium text-gray-700 mb-2">
                Hours spent on bookkeeping per month
              </label>
              <input
                type="number"
                id="hours-per-month"
                min="1"
                max="160"
                value="20"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
              />
            </div>

            <!-- Hourly rate -->
            <div>
              <label for="hourly-rate" class="block text-sm font-medium text-gray-700 mb-2">
                Your hourly rate or cost per hour ($)
              </label>
              <input
                type="number"
                id="hourly-rate"
                min="15"
                max="200"
                value="50"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
              />
            </div>

            <!-- Errors per month -->
            <div>
              <label for="errors-per-month" class="block text-sm font-medium text-gray-700 mb-2">
                Bookkeeping errors caught per month
              </label>
              <input
                type="number"
                id="errors-per-month"
                min="0"
                max="50"
                value="3"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
              />
            </div>

            <!-- Cost per error -->
            <div>
              <label for="cost-per-error" class="block text-sm font-medium text-gray-700 mb-2">
                Average cost per bookkeeping error ($)
              </label>
              <input
                type="number"
                id="cost-per-error"
                min="50"
                max="5000"
                value="500"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
              />
            </div>

            <!-- Tax penalties -->
            <div>
              <label for="tax-penalties" class="block text-sm font-medium text-gray-700 mb-2">
                Annual tax penalty risk ($)
              </label>
              <input
                type="number"
                id="tax-penalties"
                min="0"
                max="10000"
                value="2000"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
              />
            </div>
          </div>

          <!-- Results -->
          <div class="space-y-6">
            <h3 class="text-2xl font-semibold text-gray-900 mb-6">Your Potential Savings</h3>

            <!-- Monthly Savings -->
            <div class="bg-green-50 border border-green-200 rounded-lg p-6">
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-medium text-green-800">Monthly Time Savings</span>
                <span id="monthly-time-savings" class="text-2xl font-bold text-green-600">$0</span>
              </div>
              <p class="text-sm text-green-700">Hours freed up for your business</p>
            </div>

            <!-- Annual Savings -->
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-medium text-blue-800">Annual Cost Savings</span>
                <span id="annual-savings" class="text-2xl font-bold text-blue-600">$0</span>
              </div>
              <p class="text-sm text-blue-700">Money saved vs. doing it yourself</p>
            </div>

            <!-- Error Prevention -->
            <div class="bg-orange-50 border border-orange-200 rounded-lg p-6">
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-medium text-orange-800">Error Prevention Value</span>
                <span id="error-prevention" class="text-2xl font-bold text-orange-600">$0</span>
              </div>
              <p class="text-sm text-orange-700">Value of prevented mistakes</p>
            </div>

            <!-- Total ROI -->
            <div class="bg-purple-50 border border-purple-200 rounded-lg p-6">
              <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-medium text-purple-800">Total Annual ROI</span>
                <span id="total-roi" class="text-3xl font-bold text-purple-600">$0</span>
              </div>
              <p class="text-sm text-purple-700">Complete financial impact</p>
            </div>

            <!-- CTA -->
            <div class="bg-gray-50 border border-gray-200 rounded-lg p-6">
              <p class="text-sm text-gray-700 mb-4">
                Ready to start saving? Get your personalized quote today.
              </p>
              <button
                id="get-quote-btn"
                class="w-full bg-primary-600 hover:bg-primary-700 text-white py-3 px-6 rounded-lg font-semibold transition-colors duration-200"
              >
                Get Your Free Quote
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Declare gtag function for TypeScript
  declare function gtag(...args: any[]): void;

  // Calculator logic
  function calculateROI() {
    const hoursPerMonth = parseFloat((document.getElementById('hours-per-month') as HTMLInputElement)?.value) || 0;
    const hourlyRate = parseFloat((document.getElementById('hourly-rate') as HTMLInputElement)?.value) || 0;
    const errorsPerMonth = parseFloat((document.getElementById('errors-per-month') as HTMLInputElement)?.value) || 0;
    const costPerError = parseFloat((document.getElementById('cost-per-error') as HTMLInputElement)?.value) || 0;
    const taxPenalties = parseFloat((document.getElementById('tax-penalties') as HTMLInputElement)?.value) || 0;

    // Monthly time savings (hours saved)
    const monthlyTimeSavings = hoursPerMonth;

    // Annual cost savings (opportunity cost of time)
    const annualCostSavings = hoursPerMonth * hourlyRate * 12;

    // Error prevention value
    const errorPreventionValue = errorsPerMonth * costPerError * 12;

    // Total annual ROI
    const totalROI = annualCostSavings + errorPreventionValue + taxPenalties;

    // Update display
    document.getElementById('monthly-time-savings')!.textContent = `${monthlyTimeSavings} hours`;
    document.getElementById('annual-savings')!.textContent = `$${annualCostSavings.toLocaleString()}`;
    document.getElementById('error-prevention')!.textContent = `$${errorPreventionValue.toLocaleString()}`;
    document.getElementById('total-roi')!.textContent = `$${totalROI.toLocaleString()}`;
  }

  // Event listeners
  const inputs = ['hours-per-month', 'hourly-rate', 'errors-per-month', 'cost-per-error', 'tax-penalties'];
  inputs.forEach(id => {
    document.getElementById(id)?.addEventListener('input', calculateROI);
  });

  // Initial calculation
  calculateROI();

  // Get quote button
  document.getElementById('get-quote-btn')?.addEventListener('click', () => {
    // Track conversion
    if (typeof gtag !== 'undefined') {
      gtag('event', 'roi_calculator_quote', {
        event_category: 'engagement',
        event_label: 'roi_calculator'
      });
    }

    // Scroll to contact section or open modal
    const contactSection = document.getElementById('contact');
    if (contactSection) {
      contactSection.scrollIntoView({ behavior: 'smooth' });
    }
  });
</script>